Q.1) Create the table Member, Books and Issue without any constraints as mentioned in the schema description above.

mysql> use mysqlassignments;

mysql> create table Member(Member_id int unique,Member_name varchar(30),Member_Address varchar(50),Acc_open_date date,
    -> Membership_type varchar(20),fees_paid int,max_books_allowed int,panalty_amount decimal(7,2));


mysql> create table Books(Book_no int,Book_name varchar(30),Author_name varchar(30),Cost decimal(7,2),Category char(10));


mysql> create table Issue(Lib_Issue_Id int,Book_no int,Member_Id int,Issue_date date,Return_date date);



Q.2) View the structure of the tables. 

mysql> desc Member;

+-------------------+--------------+------+-----+---------+-------+
| Field             | Type         | Null | Key | Default | Extra |
+-------------------+--------------+------+-----+---------+-------+
| Member_id         | int          | YES  | UNI | NULL    |       |
| Member_name       | varchar(30)  | YES  |     | NULL    |       |
| Member_Address    | varchar(50)  | YES  |     | NULL    |       |
| Acc_open_date     | date         | YES  |     | NULL    |       |
| Membership_type   | varchar(20)  | YES  |     | NULL    |       |
| fees_paid         | int          | YES  |     | NULL    |       |
| max_books_allowed | int          | YES  |     | NULL    |       |
| panalty_amount    | decimal(7,2) | YES  |     | NULL    |       |
+-------------------+--------------+------+-----+---------+-------+
8 rows in set (0.01 sec)


mysql> desc Books;

+-------------+--------------+------+-----+---------+-------+
| Field       | Type         | Null | Key | Default | Extra |
+-------------+--------------+------+-----+---------+-------+
| Book_no     | int          | YES  |     | NULL    |       |
| Book_name   | varchar(30)  | YES  |     | NULL    |       |
| Author_name | varchar(30)  | YES  |     | NULL    |       |
| Cost        | decimal(7,2) | YES  |     | NULL    |       |
| Category    | char(10)     | YES  |     | NULL    |       |
+-------------+--------------+------+-----+---------+-------+
5 rows in set (0.00 sec)



mysql> desc Issue;
+--------------+------+------+-----+---------+-------+
| Field        | Type | Null | Key | Default | Extra |
+--------------+------+------+-----+---------+-------+
| Lib_Issue_Id | int  | YES  |     | NULL    |       |
| Book_no      | int  | YES  |     | NULL    |       |
| Member_Id    | int  | YES  |     | NULL    |       |
| Issue_date   | date | YES  |     | NULL    |       |
| Return_date  | date | YES  |     | NULL    |       |
+--------------+------+------+-----+---------+-------+
5 rows in set (0.00 sec)




Q.3) Drop the Member table

mysql> drop table Member;
Query OK, 0 rows affected (0.54 sec)


Q.4) Create the table Member again as per the schema description with the following constraints.
a. Member_Id – Primary Key
b. Membership_type - ‘Lifetime’,’ Annual’, ‘Half Yearly’,’ Quarterly’

create table Member(Member_id int primary key,Member_name varchar(30),Member_Address varchar(50),Acc_open_date date,
    -> Membership_type varchar(20) check(Membership_type IN ('Lifetime','Annual','Half Yearly','Quarterly')),fees_paid int,max_books_allowed int,panalty_amount decimal(7,2));
Query OK, 0 rows affected (0.57 sec)


Q.5) Modify the table Member increase the width of the member name to 30 characters.

mysql> alter table Member modify column Member_name varchar(30);
Query OK, 0 rows affected (0.51 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc Member;
+-------------------+--------------+------+-----+---------+-------+
| Field             | Type         | Null | Key | Default | Extra |
+-------------------+--------------+------+-----+---------+-------+
| Member_id         | int          | NO   | PRI | NULL    |       |
| Member_name       | varchar(30)  | YES  |     | NULL    |       |
| Member_Address    | varchar(50)  | YES  |     | NULL    |       |
| Acc_open_date     | date         | YES  |     | NULL    |       |
| Membership_type   | varchar(20)  | YES  |     | NULL    |       |
| fees_paid         | int          | YES  |     | NULL    |       |
| max_books_allowed | int          | YES  |     | NULL    |       |
| panalty_amount    | decimal(7,2) | YES  |     | NULL    |       |
+-------------------+--------------+------+-----+---------+-------+
8 rows in set (0.00 sec)


Q.6) Add a column named as Reference of Char(30) to Issue table.

mysql> alter table Member add column Reference char(30);
Query OK, 0 rows affected (0.88 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc Member;
+-------------------+--------------+------+-----+---------+-------+
| Field             | Type         | Null | Key | Default | Extra |
+-------------------+--------------+------+-----+---------+-------+
| Member_id         | int          | NO   | PRI | NULL    |       |
| Member_name       | varchar(30)  | YES  |     | NULL    |       |
| Member_Address    | varchar(50)  | YES  |     | NULL    |       |
| Acc_open_date     | date         | YES  |     | NULL    |       |
| Membership_type   | varchar(20)  | YES  |     | NULL    |       |
| fees_paid         | int          | YES  |     | NULL    |       |
| max_books_allowed | int          | YES  |     | NULL    |       |
| panalty_amount    | decimal(7,2) | YES  |     | NULL    |       |
| Reference         | char(30)     | YES  |     | NULL    |       |
+-------------------+--------------+------+-----+---------+-------+
9 rows in set (0.00 sec)


Q.7) Delete/Drop the column Reference from Issue.

mysql> alter table Member drop column Reference;
Query OK, 0 rows affected (0.24 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc Member;
+-------------------+--------------+------+-----+---------+-------+
| Field             | Type         | Null | Key | Default | Extra |
+-------------------+--------------+------+-----+---------+-------+
| Member_id         | int          | NO   | PRI | NULL    |       |
| Member_name       | varchar(30)  | YES  |     | NULL    |       |
| Member_Address    | varchar(50)  | YES  |     | NULL    |       |
| Acc_open_date     | date         | YES  |     | NULL    |       |
| Membership_type   | varchar(20)  | YES  |     | NULL    |       |
| fees_paid         | int          | YES  |     | NULL    |       |
| max_books_allowed | int          | YES  |     | NULL    |       |
| panalty_amount    | decimal(7,2) | YES  |     | NULL    |       |
+-------------------+--------------+------+-----+---------+-------+
8 rows in set (0.00 sec)



Q.8) Rename the table Issue to Lib_Issue.

mysql> alter table Issue rename to Lib_Issue;
Query OK, 0 rows affected (0.15 sec)


Q.9) Insert following data in table Member.

mysql> insert into Member values
    -> (1,"Richa Sharma","Pune","2005-12-10","Lifetime",25000,5,50),
    -> (2,"Garima Sen","Pune",curdate(),"Annual",1000,3,Null);
Query OK, 2 rows affected (0.10 sec)
Records: 2  Duplicates: 0  Warnings: 0

mysql> table Member;
+-----------+--------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
| Member_id | Member_name  | Member_Address | Acc_open_date | Membership_type | fees_paid | max_books_allowed | panalty_amount |
+-----------+--------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
|         1 | Richa Sharma | Pune           | 2005-12-10    | Lifetime        |     25000 |                 5 |          50.00 |
|         2 | Garima Sen   | Pune           | 2026-01-04    | Annual          |      1000 |                 3 |           NULL |
+-----------+--------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
2 rows in set (0.00 sec)



Q.10) Insert at least 5 records with suitable data.

mysql> insert into Member values
    -> (3,"Prachi More","Nashik","2015-03-13","Half Yearly",20000,6,100),
    -> (4,"Amit Patil","Dhule","2007-04-23","Annual",12000,5,150),
    -> (5,"Sneha Kulkarni","Mumbai","2020-12-14","Lifetime",10000,4,80),
    -> (6,"Rahul Deshmukh","Nagpur","2022-11-20","Quarterly",1500,3,50),
    -> (7,"Harshal Pawar","Nashik","2021-08-12","Annual",15000,8,130),
    -> (8,"Neha Joshi","Thane","2019-12-03","Half Yearly",18000,6,90),
    -> (9,"Pooja Kale","Kolhapur","2024-07-01","Quarterly",21000,9,200),
    -> (10,"Vikas More","Satara","2025-08-16","Lifetime",25000,10,180);
Query OK, 8 rows affected (0.02 sec)
Records: 8  Duplicates: 0  Warnings: 0

mysql> table Member;
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
| Member_id | Member_name    | Member_Address | Acc_open_date | Membership_type | fees_paid | max_books_allowed | panalty_amount |
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
|         1 | Richa Sharma   | Pune           | 2005-12-10    | Lifetime        |     25000 |                 5 |          50.00 |
|         2 | Garima Sen     | Pune           | 2026-01-04    | Annual          |      1000 |                 3 |           NULL |
|         3 | Prachi More    | Nashik         | 2015-03-13    | Half Yearly     |     20000 |                 6 |         100.00 |
|         4 | Amit Patil     | Dhule          | 2007-04-23    | Annual          |     12000 |                 5 |         150.00 |
|         5 | Sneha Kulkarni | Mumbai         | 2020-12-14    | Lifetime        |     10000 |                 4 |          80.00 |
|         6 | Rahul Deshmukh | Nagpur         | 2022-11-20    | Quarterly       |      1500 |                 3 |          50.00 |
|         7 | Harshal Pawar  | Nashik         | 2021-08-12    | Annual          |     15000 |                 8 |         130.00 |
|         8 | Neha Joshi     | Thane          | 2019-12-03    | Half Yearly     |     18000 |                 6 |          90.00 |
|         9 | Pooja Kale     | Kolhapur       | 2024-07-01    | Quarterly       |     21000 |                 9 |         200.00 |
|        10 | Vikas More     | Satara         | 2025-08-16    | Lifetime        |     25000 |                10 |         180.00 |
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
10 rows in set (0.00 sec)


Q.11) Modify the column Member_name. Decrease the width of the member name to 20 characters. (If it does not allow state the reason for that)

mysql> alter table Member modify column Member_name varchar(20);
Query OK, 10 rows affected (0.45 sec)
Records: 10  Duplicates: 0  Warnings: 0

mysql> desc Member;
+-------------------+--------------+------+-----+---------+-------+
| Field             | Type         | Null | Key | Default | Extra |
+-------------------+--------------+------+-----+---------+-------+
| Member_id         | int          | NO   | PRI | NULL    |       |
| Member_name       | varchar(20)  | YES  |     | NULL    |       |
| Member_Address    | varchar(50)  | YES  |     | NULL    |       |
| Acc_open_date     | date         | YES  |     | NULL    |       |
| Membership_type   | varchar(20)  | YES  |     | NULL    |       |
| fees_paid         | int          | YES  |     | NULL    |       |
| max_books_allowed | int          | YES  |     | NULL    |       |
| panalty_amount    | decimal(7,2) | YES  |     | NULL    |       |
+-------------------+--------------+------+-----+---------+-------+
8 rows in set (0.00 sec)


Q.12) Try to insert a record with Max_Books_Allowed = 110, Observe the error that comes.

mysql> insert into Member values
    -> (11,"Shubham Jadhav","Nanded","2025-05-18","Annual",14000,110,100);
Query OK, 1 row affected (0.01 sec)

mysql> table Member;
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
| Member_id | Member_name    | Member_Address | Acc_open_date | Membership_type | fees_paid | max_books_allowed | panalty_amount |
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
|         1 | Richa Sharma   | Pune           | 2005-12-10    | Lifetime        |     25000 |                 5 |          50.00 |
|         2 | Garima Sen     | Pune           | 2026-01-04    | Annual          |      1000 |                 3 |           NULL |
|         3 | Prachi More    | Nashik         | 2015-03-13    | Half Yearly     |     20000 |                 6 |         100.00 |
|         4 | Amit Patil     | Dhule          | 2007-04-23    | Annual          |     12000 |                 5 |         150.00 |
|         5 | Sneha Kulkarni | Mumbai         | 2020-12-14    | Lifetime        |     10000 |                 4 |          80.00 |
|         6 | Rahul Deshmukh | Nagpur         | 2022-11-20    | Quarterly       |      1500 |                 3 |          50.00 |
|         7 | Harshal Pawar  | Nashik         | 2021-08-12    | Annual          |     15000 |                 8 |         130.00 |
|         8 | Neha Joshi     | Thane          | 2019-12-03    | Half Yearly     |     18000 |                 6 |          90.00 |
|         9 | Pooja Kale     | Kolhapur       | 2024-07-01    | Quarterly       |     21000 |                 9 |         200.00 |
|        10 | Vikas More     | Satara         | 2025-08-16    | Lifetime        |     25000 |                10 |         180.00 |
|        11 | Shubham Jadhav | Nanded         | 2025-05-18    | Annual          |     14000 |               110 |         100.00 |
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
11 rows in set (0.00 sec)


Q.13) Generate another table named Member101 using a Create command along with a simple SQL query on member table.

mysql> create table Member101 as select * from Member;
Query OK, 11 rows affected (0.40 sec)
Records: 11  Duplicates: 0  Warnings: 0

mysql> table Member101;
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
| Member_id | Member_name    | Member_Address | Acc_open_date | Membership_type | fees_paid | max_books_allowed | panalty_amount |
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
|         1 | Richa Sharma   | Pune           | 2005-12-10    | Lifetime        |     25000 |                 5 |          50.00 |
|         2 | Garima Sen     | Pune           | 2026-01-04    | Annual          |      1000 |                 3 |           NULL |
|         3 | Prachi More    | Nashik         | 2015-03-13    | Half Yearly     |     20000 |                 6 |         100.00 |
|         4 | Amit Patil     | Dhule          | 2007-04-23    | Annual          |     12000 |                 5 |         150.00 |
|         5 | Sneha Kulkarni | Mumbai         | 2020-12-14    | Lifetime        |     10000 |                 4 |          80.00 |
|         6 | Rahul Deshmukh | Nagpur         | 2022-11-20    | Quarterly       |      1500 |                 3 |          50.00 |
|         7 | Harshal Pawar  | Nashik         | 2021-08-12    | Annual          |     15000 |                 8 |         130.00 |
|         8 | Neha Joshi     | Thane          | 2019-12-03    | Half Yearly     |     18000 |                 6 |          90.00 |
|         9 | Pooja Kale     | Kolhapur       | 2024-07-01    | Quarterly       |     21000 |                 9 |         200.00 |
|        10 | Vikas More     | Satara         | 2025-08-16    | Lifetime        |     25000 |                10 |         180.00 |
|        11 | Shubham Jadhav | Nanded         | 2025-05-18    | Annual          |     14000 |               110 |         100.00 |
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
11 rows in set (0.00 sec)




Q.14) Add the constraints on columns max_books_allowed and penalty_amt
as follows
a. max_books_allowed < 100
b. penalty_amt maximum 1000
Also give names to the constraints.

a) max_books_allowed < 100
mysql> alter table Member
    -> add constraint chk_max_book_allow check( max_books_allowed < 100);
ERROR 3819 (HY000): Check constraint 'chk_max_book_allow' is violated.

b) penalty_amt maximum 1000
mysql> alter table Member
    -> add constraint chk_penalty_amt check( panalty_amount <= 1000);

Query OK, 11 rows affected (0.39 sec)
Records: 11  Duplicates: 0  Warnings: 0


Q.15) Drop the table books.

mysql> drop table Books;

Query OK, 0 rows affected (0.40 sec)


Q.16) Create table Books again as per the schema description with the
following constraints.
a. Book_No – Primary Key
b. Book_Name – Not Null
c. Category – System, Fiction, Database, RDBMS, Others.

mysql> create table Books(Book_no int primary key,Book_name varchar(30) not null ,Author_name varchar(30),Cost int,Category char(10) check(Category IN ("System","Fiction","Database","RDBMS","Others")));
Query OK, 0 rows affected (0.03 sec)

mysql> show create table Books;
+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table | Create Table                                                                                                                                                                                                                                                                                                                                                                                                                  |
+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Books | CREATE TABLE `books` (
  `Book_no` int NOT NULL,
  `Book_name` varchar(30) NOT NULL,
  `Author_name` varchar(30) DEFAULT NULL,
  `Cost` int DEFAULT NULL,
  `Category` char(10) DEFAULT NULL,
  PRIMARY KEY (`Book_no`),
  CONSTRAINT `books_chk_1` CHECK ((`Category` in (_cp850'System',_cp850'Fiction',_cp850'Database',_cp850'RDBMS',_cp850'Others')))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |
+-------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)


Q.17) Insert data in Book table as follows:

mysql> insert into Books values
    -> (101,"Let us C","Denis Ritche",450,"System"),
    -> (102,"Oracle - Complete Ref","Loni",550,"Database"),
    -> (103,"Mastering SQL","Loni",250,"Database"),
    -> (104,"PL SQL-Ref","Scott Urman",750,"Database");
Query OK, 4 rows affected (0.01 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql> table Books;
+---------+-----------------------+--------------+------+----------+
| Book_no | Book_name             | Author_name  | Cost | Category |
+---------+-----------------------+--------------+------+----------+
|     101 | Let us C              | Denis Ritche |  450 | System   |
|     102 | Oracle - Complete Ref | Loni         |  550 | Database |
|     103 | Mastering SQL         | Loni         |  250 | Database |
|     104 | PL SQL-Ref            | Scott Urman  |  750 | Database |
+---------+-----------------------+--------------+------+----------+
4 rows in set (0.00 sec)


Q.18) Insert more records in Book table.

mysql> insert into Books values
    -> (105,"Operating System Concept","Silberschatz",720,"System"),
    -> (106,"Learning SQL","Alan Beaulieu",520,"RDBMS"),
    -> (107,"Harry Potter","J K Rowling",450,"Fiction"),
    -> (108,"SQL Cookbook","Anthony Molinaro",800,"RDBMS"),
    -> (109,"Computer Fundamentals","P K Sinha",420,"Others"),
    -> (110,"To Kill a Mockingbird","Harper Lee",350,"Fiction");
Query OK, 6 rows affected (0.01 sec)
Records: 6  Duplicates: 0  Warnings: 0

mysql> table Books;
+---------+--------------------------+------------------+------+----------+
| Book_no | Book_name                | Author_name      | Cost | Category |
+---------+--------------------------+------------------+------+----------+
|     101 | Let us C                 | Denis Ritche     |  450 | System   |
|     102 | Oracle - Complete Ref    | Loni             |  550 | Database |
|     103 | Mastering SQL            | Loni             |  250 | Database |
|     104 | PL SQL-Ref               | Scott Urman      |  750 | Database |
|     105 | Operating System Concept | Silberschatz     |  720 | System   |
|     106 | Learning SQL             | Alan Beaulieu    |  520 | RDBMS    |
|     107 | Harry Potter             | J K Rowling      |  450 | Fiction  |
|     108 | SQL Cookbook             | Anthony Molinaro |  800 | RDBMS    |
|     109 | Computer Fundamentals    | P K Sinha        |  420 | Others   |
|     110 | To Kill a Mockingbird    | Harper Lee       |  350 | Fiction  |
+---------+--------------------------+------------------+------+----------+
10 rows in set (0.00 sec)


Q.19) View the data in the tables using simple SQL query.

mysql> table Member;
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
| Member_id | Member_name    | Member_Address | Acc_open_date | Membership_type | fees_paid | max_books_allowed | panalty_amount |
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
|         1 | Richa Sharma   | Pune           | 2005-12-10    | Lifetime        |     25000 |                 5 |          50.00 |
|         2 | Garima Sen     | Pune           | 2026-01-04    | Annual          |      1000 |                 3 |           NULL |
|         3 | Prachi More    | Nashik         | 2015-03-13    | Half Yearly     |     20000 |                 6 |         100.00 |
|         4 | Amit Patil     | Dhule          | 2007-04-23    | Annual          |     12000 |                 5 |         150.00 |
|         5 | Sneha Kulkarni | Mumbai         | 2020-12-14    | Lifetime        |     10000 |                 4 |          80.00 |
|         6 | Rahul Deshmukh | Nagpur         | 2022-11-20    | Quarterly       |      1500 |                 3 |          50.00 |
|         7 | Harshal Pawar  | Nashik         | 2021-08-12    | Annual          |     15000 |                 8 |         130.00 |
|         8 | Neha Joshi     | Thane          | 2019-12-03    | Half Yearly     |     18000 |                 6 |          90.00 |
|         9 | Pooja Kale     | Kolhapur       | 2024-07-01    | Quarterly       |     21000 |                 9 |         200.00 |
|        10 | Vikas More     | Satara         | 2025-08-16    | Lifetime        |     25000 |                10 |         180.00 |
|        11 | Shubham Jadhav | Nanded         | 2025-05-18    | Annual          |     14000 |               110 |         100.00 |
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
11 rows in set (0.00 sec)

mysql>
mysql> table Books;
+---------+--------------------------+------------------+------+----------+
| Book_no | Book_name                | Author_name      | Cost | Category |
+---------+--------------------------+------------------+------+----------+
|     101 | Let us C                 | Denis Ritche     |  450 | System   |
|     102 | Oracle - Complete Ref    | Loni             |  550 | Database |
|     103 | Mastering SQL            | Loni             |  250 | Database |
|     104 | PL SQL-Ref               | Scott Urman      |  750 | Database |
|     105 | Operating System Concept | Silberschatz     |  720 | System   |
|     106 | Learning SQL             | Alan Beaulieu    |  520 | RDBMS    |
|     107 | Harry Potter             | J K Rowling      |  450 | Fiction  |
|     108 | SQL Cookbook             | Anthony Molinaro |  800 | RDBMS    |
|     109 | Computer Fundamentals    | P K Sinha        |  420 | Others   |
|     110 | To Kill a Mockingbird    | Harper Lee       |  350 | Fiction  |
+---------+--------------------------+------------------+------+----------+
10 rows in set (0.00 sec)



Q.20) Insert into Book following data.
	105, National Geographic, Adis Scott, 1000, Science

mysql> insert into Books values
    -> (105,"National Geographic","Adis Scott",1000,"Science");
ERROR 3819 (HY000): Check constraint 'books_chk_1' is violated.



Q.21) Rename the table Lib_Issue to Issue.

mysql> alter table Lib_Issue rename Issue;
Query OK, 0 rows affected (0.38 sec)

Q.22) Drop table Issue.

mysql> drop table Issue;
Query OK, 0 rows affected (0.02 sec)


Q.23) As per the given structure Create table Issue again with following
constraints.

 Lib_Issue_Id-Primary key
 Book_No- foreign key
 Member_id - foreign key
 Issue_date
 Return_date

mysql>  create table Issue(Lib_Issue_Id int primary key,Book_no int,Member_id int,
    -> Issue_date date,Return_date date);
Query OK, 0 rows affected (1.28 sec)

mysql> alter table Issue
    -> add foreign key(Book_no) references books(Book_no);
Query OK, 0 rows affected (1.36 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc Issue;
+--------------+------+------+-----+---------+-------+
| Field        | Type | Null | Key | Default | Extra |
+--------------+------+------+-----+---------+-------+
| Lib_Issue_Id | int  | NO   | PRI | NULL    |       |
| Book_no      | int  | YES  | MUL | NULL    |       |
| Member_id    | int  | YES  |     | NULL    |       |
| Issue_date   | date | YES  |     | NULL    |       |
| Return_date  | date | YES  |     | NULL    |       |
+--------------+------+------+-----+---------+-------+
5 rows in set (0.00 sec)

mysql> alter table Issue
    -> add foreign key(Member_id) references member(Member_id);
Query OK, 0 rows affected (0.83 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> alter table Issue
    -> add foreign key(Member_id) references member(Member_id);
Query OK, 0 rows affected (0.83 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc Issue;
+--------------+------+------+-----+---------+-------+
| Field        | Type | Null | Key | Default | Extra |
+--------------+------+------+-----+---------+-------+
| Lib_Issue_Id | int  | NO   | PRI | NULL    |       |
| Book_no      | int  | YES  | MUL | NULL    |       |
| Member_id    | int  | YES  | MUL | NULL    |       |
| Issue_date   | date | YES  |     | NULL    |       |
| Return_date  | date | YES  |     | NULL    |       |
+--------------+------+------+-----+---------+-------+
5 rows in set (0.12 sec)


Q.24) Insert following data into Issue table.

mysql> insert into issue(Lib_Issue_Id,Book_no,Member_id,Issue_date)
    -> values(7001,101,1,"2006-12-10"),
    -> (7002,102,2,"2006-12-25"),
    -> (7003,104,1,"2006-01-15"),
    -> (7004,101,1,"2006-07-04"),
    -> (7005,104,2,"2006-11-15"),
    -> (7006,101,3,"2006-02-18");
Query OK, 6 rows affected (0.02 sec)
Records: 6  Duplicates: 0  Warnings: 0



mysql> table issue;
+--------------+---------+-----------+------------+-------------+
| Lib_Issue_Id | Book_no | Member_id | Issue_date | Return_date |
+--------------+---------+-----------+------------+-------------+
|         7001 |     101 |         1 | 2006-12-10 | NULL        |
|         7002 |     102 |         2 | 2006-12-25 | NULL        |
|         7003 |     104 |         1 | 2006-01-15 | NULL        |
|         7004 |     101 |         1 | 2006-07-04 | NULL        |
|         7005 |     104 |         2 | 2006-11-15 | NULL        |
|         7006 |     101 |         3 | 2006-02-18 | NULL        |
+--------------+---------+-----------+------------+-------------+
6 rows in set (0.01 sec)


Q.25) Remove the constraints on Issue table

mysql> alter table issue drop primary key;
Query OK, 6 rows affected (0.61 sec)
Records: 6  Duplicates: 0  Warnings: 0

mysql> desc issue;
+--------------+------+------+-----+---------+-------+
| Field        | Type | Null | Key | Default | Extra |
+--------------+------+------+-----+---------+-------+
| Lib_Issue_Id | int  | NO   |     | NULL    |       |
| Book_no      | int  | YES  | MUL | NULL    |       |
| Member_id    | int  | YES  | MUL | NULL    |       |
| Issue_date   | date | YES  |     | NULL    |       |
| Return_date  | date | YES  |     | NULL    |       |
+--------------+------+------+-----+---------+-------+
5 rows in set (0.00 sec)


mysql> alter table issue drop constraint issue_ibfk_1;
Query OK, 0 rows affected (0.17 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> alter table issue drop constraint issue_ibfk_2;
Query OK, 0 rows affected (0.38 sec)
Records: 0  Duplicates: 0  Warnings: 0


mysql> show create table issue;
+-------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table | Create Table                                                                                                                                                                                                                                                                                                             |
+-------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| issue | CREATE TABLE `issue` (
  `Lib_Issue_Id` int NOT NULL,
  `Book_no` int DEFAULT NULL,
  `Member_id` int DEFAULT NULL,
  `Issue_date` date DEFAULT NULL,
  `Return_date` date DEFAULT NULL,
  KEY `Book_no` (`Book_no`),
  KEY `Member_id` (`Member_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |
+-------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)



Q.27) Now enable the constraints of Issue table. Observe the error

mysql> alter table issue
    -> add primary key(Lib_Issue_Id);
Query OK, 0 rows affected (0.93 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc issue;
+--------------+------+------+-----+---------+-------+
| Field        | Type | Null | Key | Default | Extra |
+--------------+------+------+-----+---------+-------+
| Lib_Issue_Id | int  | NO   | PRI | NULL    |       |
| Book_no      | int  | YES  | MUL | NULL    |       |
| Member_id    | int  | YES  | MUL | NULL    |       |
| Issue_date   | date | YES  |     | NULL    |       |
| Return_date  | date | YES  |     | NULL    |       |
+--------------+------+------+-----+---------+-------+
5 rows in set (0.00 sec)


mysql> alter table issue
    -> add foreign key(Book_no) references books(Book_no);
Query OK, 7 rows affected (0.58 sec)
Records: 7  Duplicates: 0  Warnings: 0


mysql> alter table issue
    -> add foreign key(Member_id) references member(Member_id);
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`mysqlassignments`.`#sql-17fc_c`, CONSTRAINT `issue_ibfk_2` FOREIGN KEY (`Member_id`) REFERENCES `member` (`Member_id`))



Q.28) Delete the record inserted at Q-27) and enable the constraints.

mysql> delete from issue where Lib_Issue_Id = 7007;
Query OK, 1 row affected (0.02 sec)

mysql> table issue;
+--------------+---------+-----------+------------+-------------+
| Lib_Issue_Id | Book_no | Member_id | Issue_date | Return_date |
+--------------+---------+-----------+------------+-------------+
|         7001 |     101 |         1 | 2006-12-10 | NULL        |
|         7002 |     102 |         2 | 2006-12-25 | NULL        |
|         7003 |     104 |         1 | 2006-01-15 | NULL        |
|         7004 |     101 |         1 | 2006-07-04 | NULL        |
|         7005 |     104 |         2 | 2006-11-15 | NULL        |
|         7006 |     101 |         3 | 2006-02-18 | NULL        |
+--------------+---------+-----------+------------+-------------+
6 rows in set (0.00 sec)

mysql>  alter table issue
    -> add foreign key(Member_id) references member(Member_id);
Query OK, 6 rows affected (0.52 sec)
Records: 6  Duplicates: 0  Warnings: 0

mysql> show create table issue;
+-------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table | Create Table                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
+-------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| issue | CREATE TABLE `issue` (
  `Lib_Issue_Id` int NOT NULL,
  `Book_no` int DEFAULT NULL,
  `Member_id` int DEFAULT NULL,
  `Issue_date` date DEFAULT NULL,
  `Return_date` date DEFAULT NULL,
  PRIMARY KEY (`Lib_Issue_Id`),
  KEY `Book_no` (`Book_no`),
  KEY `Member_id` (`Member_id`),
  CONSTRAINT `issue_ibfk_1` FOREIGN KEY (`Book_no`) REFERENCES `books` (`Book_no`),
  CONSTRAINT `issue_ibfk_2` FOREIGN KEY (`Member_id`) REFERENCES `member` (`Member_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |


Q.29) Try to delete the record of member id 1 from member table and observe the error .

mysql> delete from member where Member_id = 1;
ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`mysqlassignments`.`issue`, CONSTRAINT `issue_ibfk_2` FOREIGN KEY (`Member_id`) REFERENCES `member` (`Member_id`))

Q.30) View the data and structure of all the three tables Member, Issue, Book.

mysql> desc member;
+-------------------+--------------+------+-----+---------+-------+
| Field             | Type         | Null | Key | Default | Extra |
+-------------------+--------------+------+-----+---------+-------+
| Member_id         | int          | NO   | PRI | NULL    |       |
| Member_name       | varchar(20)  | YES  |     | NULL    |       |
| Member_Address    | varchar(50)  | YES  |     | NULL    |       |
| Acc_open_date     | date         | YES  |     | NULL    |       |
| Membership_type   | varchar(20)  | YES  |     | NULL    |       |
| fees_paid         | int          | YES  |     | NULL    |       |
| max_books_allowed | int          | YES  |     | NULL    |       |
| panalty_amount    | decimal(7,2) | YES  |     | NULL    |       |
+-------------------+--------------+------+-----+---------+-------+
8 rows in set (0.00 sec)

mysql> table member;
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
| Member_id | Member_name    | Member_Address | Acc_open_date | Membership_type | fees_paid | max_books_allowed | panalty_amount |
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
|         1 | Richa Sharma   | Pune           | 2005-12-10    | Lifetime        |     25000 |                 5 |          50.00 |
|         2 | Garima Sen     | Pune           | 2026-01-04    | Annual          |      1000 |                 3 |           NULL |
|         3 | Prachi More    | Nashik         | 2015-03-13    | Half Yearly     |     20000 |                 6 |         100.00 |
|         4 | Amit Patil     | Dhule          | 2007-04-23    | Annual          |     12000 |                 5 |         150.00 |
|         5 | Sneha Kulkarni | Mumbai         | 2020-12-14    | Lifetime        |     10000 |                 4 |          80.00 |
|         6 | Rahul Deshmukh | Nagpur         | 2022-11-20    | Quarterly       |      1500 |                 3 |          50.00 |
|         7 | Harshal Pawar  | Nashik         | 2021-08-12    | Annual          |     15000 |                 8 |         130.00 |
|         8 | Neha Joshi     | Thane          | 2019-12-03    | Half Yearly     |     18000 |                 6 |          90.00 |
|         9 | Pooja Kale     | Kolhapur       | 2024-07-01    | Quarterly       |     21000 |                 9 |         200.00 |
|        10 | Vikas More     | Satara         | 2025-08-16    | Lifetime        |     25000 |                10 |         180.00 |
|        11 | Shubham Jadhav | Nanded         | 2025-05-18    | Annual          |     14000 |               110 |         100.00 |
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
11 rows in set (0.00 sec)

mysql> desc books;
+-------------+-------------+------+-----+---------+-------+
| Field       | Type        | Null | Key | Default | Extra |
+-------------+-------------+------+-----+---------+-------+
| Book_no     | int         | NO   | PRI | NULL    |       |
| Book_name   | varchar(30) | NO   |     | NULL    |       |
| Author_name | varchar(30) | YES  |     | NULL    |       |
| Cost        | int         | YES  |     | NULL    |       |
| Category    | char(10)    | YES  |     | NULL    |       |
+-------------+-------------+------+-----+---------+-------+
5 rows in set (0.00 sec)

mysql> table books;
+---------+--------------------------+------------------+------+----------+
| Book_no | Book_name                | Author_name      | Cost | Category |
+---------+--------------------------+------------------+------+----------+
|     101 | Let us C                 | Denis Ritche     |  450 | System   |
|     102 | Oracle - Complete Ref    | Loni             |  550 | Database |
|     103 | Mastering SQL            | Loni             |  250 | Database |
|     104 | PL SQL-Ref               | Scott Urman      |  750 | Database |
|     105 | Operating System Concept | Silberschatz     |  720 | System   |
|     106 | Learning SQL             | Alan Beaulieu    |  520 | RDBMS    |
|     107 | Harry Potter             | J K Rowling      |  450 | Fiction  |
|     108 | SQL Cookbook             | Anthony Molinaro |  800 | RDBMS    |
|     109 | Computer Fundamentals    | P K Sinha        |  420 | Others   |
|     110 | To Kill a Mockingbird    | Harper Lee       |  350 | Fiction  |
+---------+--------------------------+------------------+------+----------+
10 rows in set (0.00 sec)

mysql> desc issue;
+--------------+------+------+-----+---------+-------+
| Field        | Type | Null | Key | Default | Extra |
+--------------+------+------+-----+---------+-------+
| Lib_Issue_Id | int  | NO   | PRI | NULL    |       |
| Book_no      | int  | YES  | MUL | NULL    |       |
| Member_id    | int  | YES  | MUL | NULL    |       |
| Issue_date   | date | YES  |     | NULL    |       |
| Return_date  | date | YES  |     | NULL    |       |
+--------------+------+------+-----+---------+-------+
5 rows in set (0.00 sec)

mysql> table issue;
+--------------+---------+-----------+------------+-------------+
| Lib_Issue_Id | Book_no | Member_id | Issue_date | Return_date |
+--------------+---------+-----------+------------+-------------+
|         7001 |     101 |         1 | 2006-12-10 | NULL        |
|         7002 |     102 |         2 | 2006-12-25 | NULL        |
|         7003 |     104 |         1 | 2006-01-15 | NULL        |
|         7004 |     101 |         1 | 2006-07-04 | NULL        |
|         7005 |     104 |         2 | 2006-11-15 | NULL        |
|         7006 |     101 |         3 | 2006-02-18 | NULL        |
+--------------+---------+-----------+------------+-------------+
6 rows in set (0.00 sec)


Q.31) Modify the Return_Date of 7004,7005 to 15 days after the Issue_date.

mysql> update issue set Return_date = date_add(Issue_date,interval 15 day) where Lib_Issue_Id IN (7004,7005);
Query OK, 2 rows affected (0.57 sec)
Rows matched: 2  Changed: 2  Warnings: 0

mysql> table issue;
+--------------+---------+-----------+------------+-------------+
| Lib_Issue_Id | Book_no | Member_id | Issue_date | Return_date |
+--------------+---------+-----------+------------+-------------+
|         7001 |     101 |         1 | 2006-12-10 | NULL        |
|         7002 |     102 |         2 | 2006-12-25 | NULL        |
|         7003 |     104 |         1 | 2006-01-15 | NULL        |
|         7004 |     101 |         1 | 2006-07-04 | 2006-07-19  |
|         7005 |     104 |         2 | 2006-11-15 | 2006-11-30  |
|         7006 |     101 |         3 | 2006-02-18 | NULL        |
+--------------+---------+-----------+------------+-------------+
6 rows in set (0.00 sec)



Q.32) Remove all the records from Issue table where member_ID is 1 and Issue date in before 10-Dec-06.

mysql> delete from issue where Member_id = 1 and Issue_date < "2006-12-10";
Query OK, 2 rows affected (0.42 sec)

mysql> table issue;
+--------------+---------+-----------+------------+-------------+
| Lib_Issue_Id | Book_no | Member_id | Issue_date | Return_date |
+--------------+---------+-----------+------------+-------------+
|         7001 |     101 |         1 | 2006-12-10 | NULL        |
|         7002 |     102 |         2 | 2006-12-25 | NULL        |
|         7005 |     104 |         2 | 2006-11-15 | 2006-11-30  |
|         7006 |     101 |         3 | 2006-02-18 | NULL        |
+--------------+---------+-----------+------------+-------------+
4 rows in set (0.00 sec)



Q.33) Remove all the records from Book table with category other than RDBMS and Database.

mysql> delete from issue where Book_no IN (select Book_no from books where Category NOT IN ("RDBMS","Database"));
Query OK, 2 rows affected (0.35 sec)

mysql> table issue;
+--------------+---------+-----------+------------+-------------+
| Lib_Issue_Id | Book_no | Member_id | Issue_date | Return_date |
+--------------+---------+-----------+------------+-------------+
|         7002 |     102 |         2 | 2006-12-25 | NULL        |
|         7005 |     104 |         2 | 2006-11-15 | 2006-11-30  |
+--------------+---------+-----------+------------+-------------+
2 rows in set (0.00 sec)

mysql> delete from books where Category NOT IN ("RDBMS","Database");
Query OK, 5 rows affected (0.36 sec)

mysql> table books;
+---------+-----------------------+------------------+------+----------+
| Book_no | Book_name             | Author_name      | Cost | Category |
+---------+-----------------------+------------------+------+----------+
|     102 | Oracle - Complete Ref | Loni             |  550 | Database |
|     103 | Mastering SQL         | Loni             |  250 | Database |
|     104 | PL SQL-Ref            | Scott Urman      |  750 | Database |
|     106 | Learning SQL          | Alan Beaulieu    |  520 | RDBMS    |
|     108 | SQL Cookbook          | Anthony Molinaro |  800 | RDBMS    |
+---------+-----------------------+------------------+------+----------+
5 rows in set (0.00 sec)


Q.34) Remove the table Member.
mysql> drop table member;
Query OK, 0 rows affected (0.24 sec)


Q35) Remove the table Book.
mysql> drop table books;
Query OK, 0 rows affected (0.37 sec)






